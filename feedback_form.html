<!DOCTYPE html>
<html>
<head>
    <title>ÙÛŒØ¯Ø¨Ú© CQBooter</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a2a44;
            color: #ffffff;
            margin: 0;
            direction: rtl;
            text-align: right;
        }
        h2 {
            color: #00C4B4;
            text-align: center;
        }
        form {
            background: #23395d;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background: #ffffff;
            color: #000000;
            font-size: 16px;
            text-align: right;
        }
        button {
            width: 100%;
            padding: 10px;
            background: #00C4B4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        button:hover {
            background: #00a69a;
        }
    </style>
</head>
<body>
    <h2>ÙÛŒØ¯Ø¨Ú© Ø´Ù…Ø§ ğŸ˜Š</h2>
    <form id="feedbackForm">
        <label>Ø§Ø³Ù…Øª Ú†ÛŒÙ‡ØŸ</label>
        <input type="text" id="name" required>
        <label>Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ø¨Ø±Ø§ÛŒ Ú†ÛŒÙ‡ØŸ</label>
        <select id="feedback_type" required>
            <option value="Ø¹Ù„Ù…ÛŒ">Ù¾Ú˜ÙˆÙ‡Ø´â€ŒÙ‡Ø§ÛŒ Ø¹Ù„Ù…ÛŒ</option>
            <option value="Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø±">Ø¨ÛŒØ²Ù†Ø³ Ø®Ø¯Ù…Ø§ØªÛŒ</option>
            <option value="Ø¹Ù…ÙˆÙ…ÛŒ">Ø¹Ù…ÙˆÙ…ÛŒ</option>
        </select>
        <label>Ù†Ø¸Ø±ØªÙˆ Ø¨Ù†ÙˆÛŒØ³:</label>
        <input type="text" id="feedback_content" required>
        <label>Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø¯Ù‡ (1-5):</label>
        <select id="feedback_score" required>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <label>Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯:</label>
        <select id="feedback_category" required>
            <option value="Ú©ÛŒÙÛŒØª Ù…Ø­ØªÙˆØ§">Ú©ÛŒÙÛŒØª Ù…Ø­ØªÙˆØ§</option>
            <option value="Ø³Ø±Ø¹Øª Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ">Ø³Ø±Ø¹Øª Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ</option>
            <option value="ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ">ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ</option>
        </select>
        <label>Ø¬Ø²Ø¦ÛŒâ€ŒØªØ± Ø¨Ú¯Ùˆ:</label>
        <select id="feedback_subcategory" required>
            <option value="Ø¯Ù‚Øª">Ø¯Ù‚Øª</option>
            <option value="Ú©Ø§Ù…Ù„ Ø¨ÙˆØ¯Ù†">Ú©Ø§Ù…Ù„ Ø¨ÙˆØ¯Ù†</option>
            <option value="Ø¬Ø°Ø§Ø¨ÛŒØª">Ø¬Ø°Ø§Ø¨ÛŒØª</option>
        </select>
        <button type="submit">Ø§Ø±Ø³Ø§Ù„ ğŸš€</button>
    </form>
    <script>
        document.getElementById("feedbackForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const name = document.getElementById("name").value;
            const feedback_type = document.getElementById("feedback_type").value;
            const feedback_content = document.getElementById("feedback_content").value;
            const feedback_score = document.getElementById("feedback_score").value;
            const feedback_category = document.getElementById("feedback_category").value;
            const feedback_subcategory = document.getElementById("feedback_subcategory").value;

            // Ú¯Ø±ÙØªÙ† user_id Ùˆ username Ø§Ø² ØªÙ„Ú¯Ø±Ø§Ù…
            let user = { id: "unknown", username: "Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…" };
            if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe && window.Telegram.WebApp.initDataUnsafe.user) {
                user = window.Telegram.WebApp.initDataUnsafe.user;
            }

            const response = await fetch("https://script.google.com/macros/s/AKfycbzGM4ribch9QSjRE78O439VDC2cLfThXs43GBhP7Sy3kCwe1_Ogr44adigJUUTBLkrs/exec", {
                method: "POST",
                body: JSON.stringify({
                    name,
                    user_id: user.id || "unknown",
                    username: user.username || "Ø¨Ø¯ÙˆÙ† Ù†Ø§Ù…",
                    feedback_type,
                    feedback_content,
                    feedback_score,
                    feedback_category,
                    feedback_subcategory,
                    feedback_sentiment: "",
                    feedback_keywords: "",
                    timestamp: new Date().toISOString()
                })
            });

            if (response.ok) {
                alert("Ù…Ù…Ù†ÙˆÙ† Ø§Ø² ÙÛŒØ¯Ø¨Ú©Øª! Ù†Ø¸Ø±Øª Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯ ğŸŒŸ");
                if (window.Telegram && window.Telegram.WebApp) {
                    window.Telegram.WebApp.close();
                }
            } else {
                const errorText = await response.text();
                alert("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„: " + errorText);
            }
        });
    </script>
</body>
</html>
